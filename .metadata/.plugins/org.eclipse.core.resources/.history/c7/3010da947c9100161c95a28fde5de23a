import java.util.Scanner;

public class StateMachine implements Runnable {

	
	private int index = 0;

	public static void main(String[]args) {
		StateMachine sm = new StateMachine();
		sm.run();
		
	}

	public void run() {
		boolean done = false;
		Scanner scan = new Scanner(System.in);
		System.out.println("Start Convo!");
		while (!done) {
			System.out.println("Enter Message: ");
			String input = scan.nextLine();
			index = 0;
			int inputCount = input.length();
			MachineStates state = MachineStates.StateA;
			String currentChar = nextChar(input.toLowerCase());
			while (index < inputCount) {
				System.out.println("currentChar: "+ currentChar + " next-index: " + index); 
				switch (state) {
				case StateA:
					if(currentChar.equals("h")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateB;
					}
					else if(currentChar.equals("b")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateV;
					}
					else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateA;
					}
					//break;
				case StateB:
					if(currentChar.equals("i")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateC;
					}
					else if(currentChar.equals("o")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateD;
					}
					else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateB;					
					}
				case StateC:
					System.out.println("Hello");				
					break;
				case StateD:
					if(currentChar.equals("w")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateE;
					}else if(currentChar.equals(" ")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateH;
					}
					else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateD;
					}
				case StateE:
					if(currentChar.equals("d")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateF;
					}else if(currentChar.equals(" ")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateN;
					}
					else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateE;
					}
				case StateF:
					if(currentChar.equals("Y")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateG;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateF;
					}
				case StateG:
					System.out.println("Let's ride buckaroo!");					
					break;
				case StateH:
					if(currentChar.equals("h")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateI;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateH;
					}
				case StateI:
					if(currentChar.equals("o")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateJ;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateI;
					}					
				case StateJ:
					if(currentChar.equals(" ")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateK;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateJ;
					}
				case StateK:
					if(currentChar.equals("h")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateL;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateK;
					}
				case StateL:
					if(currentChar.equals("o")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateM;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateL;
					}
				case StateM:
					System.out.println("Who do you think you are, Santa?");
					break;
				case StateN:
					if(currentChar.equals("a")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateO;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateN;
					}
				case StateO:
					if(currentChar.equals("r")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateP;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateO;
					}
				case StateP:
					if(currentChar.equals("e")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateQ;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateP;
					}
				case StateQ:
					if(currentChar.equals(" ")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateR;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateQ;
					}
				case StateR:
					if(currentChar.equals("y")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateS;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateR;
					}
				case StateS:
					if(currentChar.equals("o")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateT;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateS;
					}
				case StateT:
					if(currentChar.equals("u")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateU;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateT;
					}
				case StateU:
					System.out.println("Fine, and you?");
					break;	
				case StateV:
					if(currentChar.equals("y")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateW;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateV;
					}
				case StateW:
					if(currentChar.equals("e")){
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateX;
					}else{
						currentChar = nextChar(input.toLowerCase());
						state = MachineStates.StateW;
					}
				case StateX:
					System.out.println("Bye");	
					done = !done;
					break;
				}
			}

		}

	}

	public String nextChar(String input) {
		char [] theChars = input.toCharArray();
		String currentChar = "";
		if(index <= theChars.length-1){
			currentChar = Character.toString(theChars[index]);
			index++;
		}
		return currentChar;
	}

	enum MachineStates {
		StateA, StateB, StateC, StateD, StateE, StateF, StateG, 
		StateH, StateI, StateJ, StateK, StateL, StateM, StateN, 
		StateO, StateP, StateQ, StateR, StateS, StateT, StateU,
		StateV, StateW, StateX, StateY, StateZ, StateA2, StateB2
	}

}
